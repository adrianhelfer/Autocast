#include <string.h>

int latchPin = 8;
int clockPin = 12;
int dataPin = 11;

const uint16_t character_patterns[] = {
  0b0000000000000000, /* (space) */
  0b0000000100001001, /* ! */
  0b0000000000011000, /* " */
  0b0101010010011001, /* # */
  0b0101010010110011, /* $ */
  0b0001111011010111, /* % */
  0b0111100000110100, /* & */
  0b0000000000010000, /* ' */
  0b0000100001000000, /* ( */
  0b0000001000000100, /* ) */
  0b0001111011010100, /* * */
  0b0001010010010000, /* + */
  0b0000001000000000, /* , */
  0b0001000010000000, /* - */
  0b0000000100000000, /* . */
  0b0000001001000000, /* / */
  0b0110001001101011, /* 0 */
  0b0000000001001001, /* 1 */
  0b0111000010101000, /* 2 */
  0b0100000010101001, /* 3 */
  0b0001000010001011, /* 4 */
  0b0101100000100010, /* 5 */
  0b0111000010100011, /* 6 */
  0b0000000000101001, /* 7 */
  0b0111000010101011, /* 8 */
  0b0101000010101011, /* 9 */
  0b0000010000010000, /* : */
  0b0000001000010000, /* ; */
  0b0001100001000000, /* < */
  0b0101000010000000, /* = */
  0b0000001010000100, /* > */
  0b0000010110101000, /* ? */
  0b0110000010111010, /* @ */
  0b0011000010101011, /* A */
  0b0100010010111001, /* B */
  0b0110000000100010, /* C */
  0b0100010000111001, /* D */
  0b0111000000100010, /* E */
  0b0011000000100010, /* F */
  0b0110000010100011, /* G */
  0b0011000010001011, /* H */
  0b0100010000110000, /* I */
  0b0110000000001001, /* J */
  0b0011100001000010, /* K */
  0b0110000000000010, /* L */
  0b0010000001001111, /* M */
  0b0010100000001111, /* N */
  0b0110000000101011, /* O */
  0b0011000010101010, /* P */
  0b0110100000101011, /* Q */
  0b0011100010101010, /* R */
  0b0101000010100011, /* S */
  0b0000010000110000, /* T */
  0b0110000000001011, /* U */
  0b0010001001000010, /* V */
  0b0010101000001011, /* W */
  0b0000101001000100, /* X */
  0b0101000010001011, /* Y */
  0b0100001001100000, /* Z */
  0b0110000000100010, /* [ */
  0b0000100000000100, /* \ */
  0b0100000000101001, /* ] */
  0b0000101000000000, /* ^ */
  0b0100000000000000, /* _ */
  0b0000000000000100, /* ` */
  0b0111010000000000, /* a */
  0b0111100000000010, /* b */
  0b0111000010000000, /* c */
  0b0100001010001001, /* d */
  0b0111001000000000, /* e */
  0b0001010011000000, /* f */
  0b0100000011001001, /* g */
  0b0011010000000010, /* h */
  0b0000010000000000, /* i */
  0b0010001000010000, /* j */
  0b0000110001010000, /* k */
  0b0010000000000010, /* l */
  0b0011010010000001, /* m */
  0b0011010000000000, /* n */
  0b0111000010000001, /* o */
  0b0011000000000110, /* p */
  0b0000000011001001, /* q */
  0b0011000000000000, /* r */
  0b0100100010000000, /* s */
  0b0111000000000010, /* t */
  0b0110000000000001, /* u */
  0b0010001000000000, /* v */
  0b0010101000000001, /* w */
  0b0000101001000100, /* x */
  0b0100000010011001, /* y */
  0b0101001000000000, /* z */
  0b0101001000100100, /* { */
  0b0000010000010000, /* | */
  0b0100100011100000, /* } */
  0b0001001011000000, /* ~ */
  0b0000000000000000, /* (del) */
};

uint16_t pattern(char c)
{
    if ((unsigned char)c < 32 || (unsigned char)c > 127)
        return 0;

    return character_patterns[(unsigned char)c - 32];
}

void shiftOut16(uint8_t dataPin, uint8_t clockPin, uint8_t bitOrder, uint16_t val) {
  uint8_t i;

  for (i = 0; i < 16; i++) {
    if (bitOrder == LSBFIRST) {
      digitalWrite(dataPin, val & 1);
      val >>= 1;
    } else {
      digitalWrite(dataPin, (val & 32768) != 0);
      val <<= 1;
    }

    digitalWrite(clockPin, HIGH);
    digitalWrite(clockPin, LOW);
  }
}

void display_text(char* str) {
  size_t len = strlen(str);

  for (int i = len-1; i >= 0; i--) {
    shiftOut16(dataPin, clockPin, MSBFIRST, pattern(str[i]));
  }
}


void setup() {
  pinMode(latchPin, OUTPUT);
  pinMode(clockPin, OUTPUT);
  pinMode(dataPin, OUTPUT);

  display_text("Prof. Helfers Mazda 323    ");

  delay(2000);
}
void loop() {
  digitalWrite(latchPin, LOW);
  delay(5);
  digitalWrite(latchPin, HIGH);
  delay(5);
}